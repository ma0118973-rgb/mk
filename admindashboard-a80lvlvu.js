import{r as s,A as J,a as X,C as G,j as e,b as Y}from"./index-D2UiMBqG.js";const te=()=>{const o=s.useContext(J),C=X(),[i,h]=s.useState("analytics"),[u,A]=s.useState(null),[T,b]=s.useState(""),[N,D]=s.useState(G.NEWS),[m,d]=s.useState(""),[E,p]=s.useState(""),[M,W]=s.useState("Admin"),[c,f]=s.useState(""),[H,y]=s.useState(""),[I,j]=s.useState(""),[$,w]=s.useState(""),[k,K]=s.useState(!0),U=s.useRef(null),P=s.useRef(null),[R,q]=s.useState(!1),[v,B]=s.useState(""),[F,Z]=s.useState("Deeply Emotional & Human");if(s.useEffect(()=>{localStorage.getItem("pg_admin_auth")!=="true"&&C("/")},[C]),!o)return null;const L=async()=>{if(v){q(!0);try{const t=await Y.generateContent(v,N,F);b(t.title),d(t.content),p(t.hashtags),y(t.seoTitle),j(t.seoDescription),w(t.seoKeywords)}catch(t){alert("AI Generation failed: "+(t.message||"Unknown error"))}q(!1)}},O=t=>{A(t.id),b(t.title),D(t.category),d(t.content),p(t.hashtags||""),W(t.author),f(t.imageUrl),y(t.seoTitle||t.title),j(t.seoDescription||""),w(t.seoKeywords||""),h("create"),window.scrollTo(0,0)},V=()=>{if(!m)return;const a=m.split(/\n\s*\n/).map(l=>{const r=l.trim();return r?r.length<60&&!r.endsWith(".")&&!r.endsWith(",")?`<h2>${r}</h2>`:`<p>${r}</p>`:""}).join(`

`);d(a),alert("✨ Text has been converted to Article format!")},_=t=>{var l;const a=(l=t.target.files)==null?void 0:l[0];if(a){if(a.size>2e6){alert("File is too large. Please select an image under 2MB.");return}const r=new FileReader;r.onloadend=()=>{f(r.result)},r.readAsDataURL(a)}},x=t=>{const a=U.current;if(!a)return;const l=a.selectionStart,r=a.selectionEnd,S=a.value,g=S.substring(l,r);let n="";t==="bold"?n=`<strong>${g||"Bold Text"}</strong>`:t==="h2"?n=`

<h2>${g||"Big Heading (H2)"}</h2>
`:t==="h3"?n=`
<h3>${g||"Sub Heading (H3)"}</h3>
`:t==="quote"?n=`
<blockquote>${g||"Quote Text"}</blockquote>
`:t==="p"&&(n=`
<p>${g||"New Paragraph"}</p>
`),d(S.substring(0,l)+n+S.substring(r)),setTimeout(()=>{a.focus(),a.setSelectionRange(l+n.length,l+n.length)},100)},z=t=>{t.preventDefault();const a={title:T,category:N,content:m,author:M,hashtags:E,imageUrl:c,seoTitle:H,seoDescription:I,seoKeywords:$};if(u){const l=o.articles.find(r=>r.id===u);l&&(o.updateArticle({...l,...a,imageUrl:c||l.imageUrl}),alert("Saved Successfully!"))}else o.addArticle({id:Date.now().toString(),date:new Date().toLocaleDateString(),likes:0,rating:0,reviewCount:0,comments:[],isPublished:!0,imageUrl:c||`https://picsum.photos/800/400?random=${Date.now()}`,...a}),alert("Published Successfully!");A(null),b(""),d(""),p(""),f(""),y(""),j(""),w("")},Q=t=>{window.confirm("Delete?")&&o.deleteArticle(t)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 bg-slate-50 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8 gap-4",children:[e.jsx("h1",{className:"text-3xl font-black text-indigo-900",children:"Publisher Dashboard"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-1 inline-flex border border-gray-200",children:[e.jsx("button",{onClick:()=>h("analytics"),className:`px-6 py-2 rounded font-bold transition-colors ${i==="analytics"?"bg-indigo-600 text-white":"text-gray-500"}`,children:"Stats"}),e.jsx("button",{onClick:()=>h("create"),className:`px-6 py-2 rounded font-bold transition-colors ${i==="create"?"bg-indigo-600 text-white":"text-gray-500"}`,children:"Write"}),e.jsx("button",{onClick:()=>h("manage"),className:`px-6 py-2 rounded font-bold transition-colors ${i==="manage"?"bg-indigo-600 text-white":"text-gray-500"}`,children:"Manage"})]})]}),i==="create"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-indigo-50",children:[e.jsx("h2",{className:"text-2xl font-black mb-6 text-indigo-900 border-b border-gray-100 pb-4",children:u?"Edit Article":"Write New Story"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1 uppercase",children:"Article Headline"}),e.jsx("input",{type:"text",required:!0,value:T,onChange:t=>b(t.target.value),className:"w-full border-2 border-gray-200 rounded-lg p-4 focus:border-indigo-500 focus:outline-none text-xl font-bold text-gray-900 placeholder-gray-300",placeholder:"The main title of the story..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1 uppercase",children:"Category"}),e.jsx("select",{value:N,onChange:t=>D(t.target.value),className:"w-full border-2 border-gray-200 rounded-lg p-3 text-lg font-bold bg-white",children:Object.values(G).map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1 uppercase",children:"Cover Image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:t=>f(t.target.value),className:"w-full border-2 border-gray-200 rounded-lg p-3 text-sm",placeholder:"Paste Link or Upload ->"}),e.jsx("input",{type:"file",accept:"image/*",ref:P,onChange:_,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var t;return(t=P.current)==null?void 0:t.click()},className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-bold hover:bg-gray-300 whitespace-nowrap",children:[e.jsx("i",{className:"fas fa-upload"})," Upload"]})]}),c&&e.jsx("div",{className:"mt-2 h-20 w-32 rounded-lg overflow-hidden border border-gray-200",children:e.jsx("img",{src:c,alt:"Preview",className:"w-full h-full object-cover"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 mb-1 uppercase",children:"Hashtags (Required)"}),e.jsx("input",{type:"text",value:E,onChange:t=>p(t.target.value),className:"w-full border-2 border-gray-200 rounded-lg p-3 text-lg font-bold text-blue-600",placeholder:"#News #Trending #Viral"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-500 uppercase",children:"Story Content"}),e.jsx("button",{type:"button",onClick:V,className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white px-4 py-1 rounded-full text-xs font-bold uppercase shadow hover:shadow-lg transition-all transform hover:scale-105",children:"✨ Convert to Article"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 bg-gray-50 p-2 rounded-lg border border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>x("bold"),className:"px-3 py-1 bg-white border border-gray-300 rounded font-bold text-sm hover:bg-black hover:text-white",children:"B"}),e.jsx("button",{type:"button",onClick:()=>x("h2"),className:"px-3 py-1 bg-white border border-gray-300 rounded font-bold text-sm hover:bg-black hover:text-white",children:"H2 (Heading)"}),e.jsx("button",{type:"button",onClick:()=>x("h3"),className:"px-3 py-1 bg-white border border-gray-300 rounded font-bold text-sm hover:bg-black hover:text-white",children:"H3"}),e.jsx("button",{type:"button",onClick:()=>x("quote"),className:"px-3 py-1 bg-white border border-gray-300 rounded font-bold text-sm hover:bg-black hover:text-white",children:'""'}),e.jsx("button",{type:"button",onClick:()=>x("p"),className:"px-3 py-1 bg-white border border-gray-300 rounded font-bold text-sm hover:bg-black hover:text-white",children:"New Para"})]}),e.jsx("textarea",{ref:U,required:!0,value:m,onChange:t=>d(t.target.value),className:"w-full border-2 border-gray-200 rounded-lg p-6 focus:border-indigo-500 focus:outline-none h-[500px] text-lg font-medium leading-relaxed text-gray-800 font-serif",placeholder:"Paste your text here and click 'Convert to Article'..."})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>K(!k),children:[e.jsxs("h3",{className:"text-lg font-black uppercase tracking-widest text-gray-800",children:[e.jsx("i",{className:"fas fa-search mr-2 text-green-600"})," SEO & Metadata"]}),e.jsx("i",{className:`fas fa-chevron-${k?"up":"down"} text-gray-400`})]}),k&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500 bg-green-50 p-3 rounded mb-4",children:"Good Meta Tags help Google find your story."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase",children:"Meta Title"}),e.jsx("input",{type:"text",value:H,onChange:t=>y(t.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm font-bold text-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase",children:"Meta Description"}),e.jsx("textarea",{value:I,onChange:t=>j(t.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm text-gray-700 h-20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1 uppercase",children:"Keywords"}),e.jsx("input",{type:"text",value:$,onChange:t=>w(t.target.value),className:"w-full border border-gray-300 rounded p-2 text-sm text-gray-700"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-10 py-4 rounded-xl font-black text-lg uppercase tracking-widest hover:bg-indigo-700 shadow-xl w-full md:w-auto",children:u?"Save Changes":"Publish Article"})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-indigo-900 text-white p-8 rounded-2xl shadow-xl sticky top-24",children:[e.jsxs("h3",{className:"font-black text-xl mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-magic text-pink-400"})," AI Assistant"]}),e.jsx("p",{className:"text-indigo-200 mb-6 font-medium text-sm",children:"Enter a topic and let AI write the full story with SEO tags."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:v,onChange:t=>B(t.target.value),placeholder:"e.g. History of Rome",className:"w-full bg-white/10 border border-white/20 rounded-lg p-3 text-white placeholder-indigo-300 font-bold"}),e.jsx("button",{type:"button",onClick:L,disabled:R||!v,className:"w-full py-4 rounded-lg font-black text-sm uppercase tracking-widest bg-pink-500 hover:bg-pink-600 text-white shadow-lg transition-all",children:R?"Writing...":"Generate Story"})]})]})})]}),i==="manage"&&e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-500 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"p-4",children:"Title"}),e.jsx("th",{className:"p-4",children:"Category"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:o.articles.map(t=>e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-bold text-gray-900",children:t.title}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded uppercase",children:t.category})}),e.jsxs("td",{className:"p-4 text-right",children:[e.jsx("button",{onClick:()=>O(t),className:"text-blue-600 font-bold mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>Q(t.id),className:"text-red-600 font-bold",children:"Delete"})]})]},t.id))})]})}),i==="analytics"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border-l-4 border-indigo-500 shadow-sm",children:[e.jsx("div",{className:"text-gray-400 text-xs font-bold uppercase",children:"Total Views"}),e.jsx("div",{className:"text-3xl font-black text-indigo-900 mt-2",children:o.articles.reduce((t,a)=>t+a.reviewCount*12,0)})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border-l-4 border-pink-500 shadow-sm",children:[e.jsx("div",{className:"text-gray-400 text-xs font-bold uppercase",children:"Articles"}),e.jsx("div",{className:"text-3xl font-black text-pink-900 mt-2",children:o.articles.length})]})]})]})};export{te as AdminDashboard};
