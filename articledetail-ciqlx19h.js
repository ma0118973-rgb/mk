import{r as d,j as e,u as A,a as R,A as L,L as f}from"./index-D2UiMBqG.js";import{A as $}from"./ArticleCard-BxVAUfvm.js";const v=({comment:l,articleId:a,onReply:n,level:o=0})=>{const[p,x]=d.useState(!1),[i,h]=d.useState(""),b=c=>{if(c.preventDefault(),!i.trim())return;const t={id:Date.now().toString(),author:"Guest User",content:i,date:new Date().toISOString().split("T")[0],replies:[],likes:0};n(a,t,l.id),h(""),x(!1)};return e.jsx("div",{className:`mt-4 ${o>0?"ml-6 border-l-2 border-gray-100 pl-4":""}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs font-bold",children:l.author.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[e.jsx("span",{className:"font-bold text-sm text-gray-900",children:l.author}),e.jsx("span",{className:"text-xs text-gray-400",children:l.date})]}),e.jsx("p",{className:"text-sm text-gray-700",children:l.content})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 ml-1",children:[e.jsx("button",{className:"text-xs text-gray-500 hover:text-blue-600 font-medium",children:"Like"}),e.jsx("button",{onClick:()=>x(!p),className:"text-xs text-gray-500 hover:text-blue-600 font-medium",children:"Reply"})]}),p&&e.jsxs("form",{onSubmit:b,className:"mt-3",children:[e.jsx("textarea",{value:i,onChange:c=>h(c.target.value),className:"w-full text-sm border border-gray-300 rounded p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Write a reply...",rows:2}),e.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"text-xs text-gray-500 px-3 py-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white text-xs px-3 py-1 rounded hover:bg-blue-700",children:"Post Reply"})]})]}),l.replies.map(c=>e.jsx(v,{comment:c,articleId:a,onReply:n,level:o+1},c.id))]})]})})},D=({comments:l,articleId:a,onAddComment:n})=>{const[o,p]=d.useState(""),x=i=>{if(i.preventDefault(),!o.trim())return;const h={id:Date.now().toString(),author:"Guest User",content:o,date:new Date().toISOString().split("T")[0],replies:[],likes:0};n(a,h),p("")};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("h3",{className:"text-xl font-bold mb-6",children:["Comments (",l.length,")"]}),e.jsxs("form",{onSubmit:x,className:"mb-8",children:[e.jsx("textarea",{value:o,onChange:i=>p(i.target.value),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Join the discussion...",rows:3}),e.jsx("button",{type:"submit",className:"mt-3 bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Post Comment"})]}),e.jsx("div",{className:"space-y-6",children:l.map(i=>e.jsx(v,{comment:i,articleId:a,onReply:n},i.id))})]})},U=()=>{const{id:l}=A();R();const a=d.useContext(L),[n,o]=d.useState(0),[p,x]=d.useState(0),[i,h]=d.useState(0),[b,c]=d.useState(!1),t=a==null?void 0:a.articles.find(s=>s.id===l),y=(a==null?void 0:a.articles.findIndex(s=>s.id===l))??-1,r=a==null?void 0:a.articles[(y+1)%((a==null?void 0:a.articles.length)||1)],j=(a==null?void 0:a.articles.filter(s=>s.category===(t==null?void 0:t.category)&&s.id!==(t==null?void 0:t.id)&&s.id!==(r==null?void 0:r.id)).slice(0,3))||[];if(d.useEffect(()=>{const s=()=>{const g=document.documentElement.scrollHeight-window.innerHeight,m=window.scrollY/g*100;h(m),m>40&&m<95?c(!0):c(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),d.useEffect(()=>{if(t){document.title=`${t.seoTitle||t.title} | VELARA`;const s=(m,C,N=!1)=>{let u=N?document.querySelector(`meta[property='${m}']`):document.querySelector(`meta[name='${m}']`);u||(u=document.createElement("meta"),N?u.setAttribute("property",m):u.setAttribute("name",m),document.head.appendChild(u)),u.setAttribute("content",C)},g=t.seoDescription||t.content.replace(/<[^>]+>/g,"").substring(0,160);s("description",g),t.seoKeywords&&s("keywords",t.seoKeywords),s("og:title",t.seoTitle||t.title,!0),s("og:description",g,!0),s("og:image",t.imageUrl,!0),s("og:url",window.location.href,!0),s("og:type","article",!0),window.scrollTo(0,0),o(0),x(0)}},[t,l]),!a||!l)return e.jsx("div",{children:"Loading..."});if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh]",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Article not found"}),e.jsx(f,{to:"/",className:"text-blue-600 mt-4 hover:underline",children:"Go Home"})]});const k=()=>{n===0?(o(1),a.toggleLike(t.id)):o(0)},S=s=>{x(s),a.rateArticle&&a.rateArticle(t.id,s)},w=async()=>{if(navigator.share)try{await navigator.share({title:t.title,text:t.seoDescription,url:window.location.href})}catch(s){console.error("Share failed:",s)}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"fixed top-0 left-0 h-1 bg-gray-200 z-[100] w-full",children:e.jsx("div",{className:"h-full bg-pink-600 transition-all duration-100 ease-out shadow-[0_0_10px_rgba(219,39,119,0.7)]",style:{width:`${i}%`}})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-20 pt-10",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{to:`/category/${t.category}`,className:"inline-block bg-indigo-100 text-indigo-800 px-6 py-2 rounded-full text-base font-bold uppercase tracking-widest mb-6 hover:bg-indigo-200 transition-colors",children:t.category}),e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-7xl font-serif font-black text-slate-900 leading-tight mb-8",children:t.title}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-slate-600 font-medium text-lg mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-2xl",children:t.author.charAt(0)}),e.jsxs("div",{className:"flex flex-col text-left leading-tight",children:[e.jsxs("span",{className:"text-black font-bold",children:["By ",t.author]}),e.jsxs("span",{className:"text-slate-500 text-base",children:[t.date," â€¢ 5 Min Read"]})]})]})]}),e.jsxs("div",{className:"w-full aspect-video rounded-3xl overflow-hidden shadow-2xl mb-16 border border-gray-100 relative group",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"}),e.jsxs("button",{onClick:w,className:"absolute top-4 right-4 bg-white/90 text-black px-6 py-3 rounded-full font-bold uppercase tracking-widest shadow-lg hover:bg-white transition-all transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-share-alt mr-2 text-pink-600"})," Share"]})]}),e.jsxs("article",{className:"prose prose-lg md:prose-2xl lg:prose-3xl max-w-none text-slate-900 border-b-2 border-slate-100 pb-12 mb-12",children:[e.jsx("div",{className:"article-content-wrapper",dangerouslySetInnerHTML:{__html:t.content}}),e.jsx("style",{children:`
            .article-content-wrapper p, 
            .article-content-wrapper li {
              font-size: 28px !important;
              line-height: 1.8 !important;
              margin-bottom: 2rem !important;
              color: #1e293b !important; /* Slate 800 */
            }
            @media (min-width: 768px) {
              .article-content-wrapper p,
              .article-content-wrapper li {
                font-size: 35px !important;
                line-height: 1.9 !important;
              }
            }
            .article-content-wrapper h2 {
              font-size: 40px !important;
              line-height: 1.2 !important;
              font-weight: 900 !important;
              margin-top: 3rem !important;
              margin-bottom: 1.5rem !important;
              color: #000 !important;
            }
            .article-content-wrapper h3 {
               font-size: 32px !important;
               font-weight: 800 !important;
               color: #312e81 !important; /* Indigo 900 */
               margin-top: 2.5rem !important;
            }
            .article-content-wrapper blockquote {
              font-size: 30px !important;
              font-style: italic !important;
              border-left: 8px solid #db2777 !important;
              padding-left: 20px !important;
              background: #f8fafc;
              padding: 20px;
              margin: 30px 0;
            }
          `})]}),e.jsxs("div",{className:"bg-slate-50 p-8 md:p-12 rounded-3xl shadow-sm text-center mb-16",children:[e.jsx("h3",{className:"font-black text-slate-900 mb-8 text-3xl",children:"Was this article helpful?"}),e.jsx("div",{className:"flex justify-center gap-6 mb-10",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>S(s),className:`text-5xl transition-colors transform hover:scale-110 ${s<=p?"text-yellow-400":"text-gray-300 hover:text-yellow-400"}`,children:e.jsx("i",{className:"fas fa-star"})},s))}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:k,className:`flex items-center space-x-4 px-12 py-5 rounded-full transition-all duration-300 shadow-xl transform hover:-translate-y-1 ${n===1?"bg-pink-600 text-white":"bg-white border-4 border-slate-200 text-slate-700"}`,children:[e.jsx("i",{className:`${n===1?"fas":"far"} fa-heart text-3xl`}),e.jsxs("span",{className:"font-bold text-2xl",children:[t.likes+(n===1?1:0)," Likes"]})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-4 px-12 py-5 rounded-full bg-blue-600 text-white transition-all duration-300 shadow-xl transform hover:-translate-y-1 hover:bg-blue-700",children:[e.jsx("i",{className:"fas fa-share-alt text-3xl"}),e.jsx("span",{className:"font-bold text-2xl",children:"Share"})]})]}),t.hashtags&&e.jsx("div",{className:"mt-8 text-indigo-500 font-bold text-2xl tracking-wide",children:t.hashtags})]}),r&&e.jsxs("div",{className:"mb-24 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"h-px bg-gray-300 flex-grow"}),e.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-gray-400",children:"Continuing Story"}),e.jsx("div",{className:"h-px bg-gray-300 flex-grow"})]}),e.jsx(f,{to:`/article/${r.id}`,className:"block group relative rounded-3xl overflow-hidden shadow-2xl border-4 border-white hover:border-pink-500 transition-all duration-300",children:e.jsxs("div",{className:"aspect-[21/9] w-full relative",children:[e.jsx("img",{src:r.imageUrl,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-1000",alt:"Next"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-8 md:p-12 w-full",children:[e.jsx("span",{className:"bg-pink-600 text-white text-xs font-bold px-3 py-1 uppercase tracking-widest rounded mb-4 inline-block animate-pulse",children:"Up Next"}),e.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold text-white mb-4 leading-tight group-hover:text-pink-200 transition-colors",children:r.title}),e.jsxs("p",{className:"text-gray-300 text-lg md:text-xl line-clamp-2 max-w-3xl font-medium",children:[r.content.replace(/<[^>]+>/g,"").substring(0,150),"..."]}),e.jsxs("div",{className:"mt-6 flex items-center text-white font-bold uppercase tracking-widest text-sm",children:["Read Now ",e.jsx("i",{className:"fas fa-arrow-right ml-3 transform group-hover:translate-x-2 transition-transform"})]})]})]})})]}),j.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h3",{className:"text-3xl font-black uppercase tracking-widest text-slate-900 mb-8 border-l-8 border-indigo-600 pl-6",children:"More For You"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:j.map(s=>e.jsx($,{article:s,compact:!0},s.id))})]}),e.jsx(D,{comments:t.comments,articleId:t.id,onAddComment:a.addComment})]}),r&&b&&e.jsx("div",{className:"fixed bottom-20 right-4 left-4 md:left-auto md:w-96 z-40 animate-slide-up",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.2)] border-l-8 border-pink-600 p-4 flex items-center gap-4 relative overflow-hidden group",children:[e.jsx("button",{onClick:s=>{s.preventDefault(),c(!1)},className:"absolute top-1 right-2 text-gray-300 hover:text-gray-600",children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("div",{className:"w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden bg-gray-200",children:e.jsx("img",{src:r.imageUrl,className:"w-full h-full object-cover",alt:""})}),e.jsxs(f,{to:`/article/${r.id}`,className:"flex-grow",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase text-pink-600 block mb-1",children:"Coming Up Next"}),e.jsx("h4",{className:"text-sm font-bold text-gray-900 leading-tight line-clamp-2 group-hover:text-pink-700 transition-colors",children:r.title})]}),e.jsx(f,{to:`/article/${r.id}`,className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-900 hover:bg-pink-600 hover:text-white transition-colors",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})}),e.jsx("style",{children:`
        @keyframes slide-up {
          from { transform: translateY(100px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
          animation: slide-up 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
      `})]})};export{U as ArticleDetail};
